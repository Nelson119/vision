"use strict";var data=[{title:"陳建銘議員石牌公園『愛與環保...",href:"images/activities/event02.png",type:"image/jpeg",thumbnail:"images/activities/event02.png",date:"2014.10.26"},{title:"吉廣建設江子翠住宅開工動土典禮",href:"images/activities/event02.png",type:"image/jpeg",thumbnail:"images/activities/event02.png",date:"2014.10.26"}];$(function(){!function(e){var t=new TimelineMax({paused:!0,onComplete:function(){}}),i=$("nav i",e);$("nav li",e).on("mouseover",function(){var e=$(this);i.show(),t.stop(),t=new TimelineMax({paused:!0,onComplete:function(){}});var n=e.offset().left-e.parent().offset().left;n=$("nav").width()-e.parent().width()+n-e.parent().css("marginRight").replace(/px/,""),t.add([TweenMax.to(i,.25,{left:n,onComplete:function(){}})]),t.add([function(){e.addClass("on").siblings().removeClass("on")}]),t.play()}),$("nav li",e).on("mouseout",function(){$("nav >ul >li.active",e).length||i.hide(),$("nav >.menu-container ul >li.active",e).trigger("mouseover")}).trigger("mouseout");var n=e,a=new TimelineMax({paused:!0,onComplete:function(){}});$(window).on("scroll resize",function(){a.stop(),a=new TimelineMax({paused:!0,onComplete:function(){}});var e=$(window).scrollTop(),t=n.offset().top;t>=e&&TweenMax.set(n,{top:e}),a.add([TweenMax.to(n,.7,{top:$(window).scrollTop(),delay:.3})]),a.play()}),$(".menu >ul").superfish({speedOut:"normal",delay:500})}($("header")),function(e){function t(t){$(">ul li",e).eq(t).addClass("active").siblings().removeClass("active"),a.css("background-image",n.css("background-image")),TweenMax.set(a,{opacity:1,display:"block"}),i=$("ul li.active",e),n.css("background-image","url("+$("img",i).attr("src")+")"),TweenMax.to(a,.5,{opacity:0,onComplete:function(){TweenMax.set(a,{display:"none"})}}),$(">ul li.active",e).next().length?$("nav .next",e).show():$("nav .next",e).hide(),$(">ul li.active",e).prev().length?$("nav .prev",e).show():$("nav .prev",e).hide()}var i=$("ul li.active",e),n=$(document.createElement("div")),a=$(document.createElement("div"));n.addClass("cur"),a.addClass("fade"),n.insertBefore($(">nav",e)),a.insertBefore($(">nav",e)),$(">nav ul",e).html(""),$(">ul li",e).each(function(i,n){var a=$("<li><a href='javascript:'><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2P4zwAAAgEBAOIxSPwAAAAASUVORK5CYII=' alt='"+i+"'></a></li>");a.on("click",function(){a.addClass("active").siblings().removeClass("active"),t(i)}),$(n).hasClass("active")&&a.addClass("active"),$(">nav ul",e).append(a),$(">nav ul",e).append("\r\n")}),$("nav .prev",e).on("click",function(){$("nav ul li.active",e).prev().length&&$("nav ul li.active",e).prev().trigger("click")}),$("nav .next",e).on("click",function(){$("nav ul li.active",e).next().length&&$("nav ul li.active",e).next().trigger("click")}),t(0)}($(".highlight").length>0?$(".highlight"):[]),function(e){$("nav.categories ul li",e).on("mouseover",function(){var t=$("nav i",e),i="#fff",n="#535353",a=$(this),l=new TimelineMax({paused:!0,onComplete:function(){}});l.add([TweenMax.to(t,.25,{left:a.offset().left-a.parent().offset().left}),TweenMax.to($("a",a.siblings()),.25,{color:n}),TweenMax.to($("a",a),.25,{color:i})]),l.play()})}($(".activities, .marketing, .management, .news")),function(e){$(window).on("resize",function(){var t=$(">ul",e),i=$(">ul li.active",e),n=i.index(),a=$(window).width()>1366?$(window).width():1366,l=e.width(),o=(a-l)/2-588*(n+2),r=1195-(a-l)/2;TweenMax.to(t,.5,{marginLeft:o,paddingLeft:r}),i.next().length?$(".next",e).fadeIn(250):$(".next",e).hide(),i.prev().length?$(".prev",e).fadeIn(250):$(".prev",e).hide()}).trigger("resize"),$(".next",e).on("click",function(){var t=$(">ul li.active",e);t.next().next().length&&(t.next().addClass("active").siblings().removeClass("active"),$(window).trigger("resize"),t.next().next().length||$(".next",e).hide(),t.prev().prev().length&&$(".prev",e).show())}),$(".prev",e).on("click",function(){var t=$(">ul li.active",e);t.prev().prev().length&&(t.prev().addClass("active").siblings().removeClass("active"),$(window).trigger("resize"),t.prev().prev().length||$(this).hide(),t.next().next().length||$(".next",e).hide())}),$(">ul li a, .activities-list li a",e).on("click",function(){blueimp.Gallery(data,{thumbnailProperty:"thumbnail",closeOnSlideClick:!1,transitionSpeed:1e3,onopened:function(){$(window).on("resize",function(){var e=$("#blueimp-gallery .indicator .active").index(),t=$(".slide-content").eq(e),i=t.offset().top-t.parent().offset().top,n=t.offset().left-t.parent().offset().left;TweenMax.to($("#blueimp-gallery .next"),.5,{left:n+t.width(),top:i+t.height()/2-$("#blueimp-gallery .next").height()/2}),TweenMax.to($("#blueimp-gallery .prev"),.5,{left:n-$("#blueimp-gallery .prev").width(),top:i+t.height()/2-$("#blueimp-gallery .prev").height()/2}),TweenMax.to($("#blueimp-gallery .close"),.5,{left:n+t.width()+10,top:i}),TweenMax.to($("#blueimp-gallery .title"),.5,{left:n,top:i+t.height()+10})}).trigger("resize")},onslideend:function(){$(window).trigger("resize");var e=$("#blueimp-gallery .indicator .active").index();$("#blueimp-gallery .title").append("<b>"+data[e].date+"</b>")}})})}($(".activities.content, .marketing, .management")),function(e){$(".top",e).on("click",function(){var e=$(window).scrollTop();TweenMax.to($("body, html"),e/3e3,{scrollTop:0})})}($("footer")),function(e){return e.length?void $(".mq ul").marquee({}):!1}($(".marquee"))});